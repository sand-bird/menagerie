[gd_scene load_steps=11 format=3 uid="uid://dqd3uy65kfqe1"]

[ext_resource type="Theme" uid="uid://brxpo2y3gemm5" path="res://assets/ui/themes/label_medium_shadow.tres" id="1"]
[ext_resource type="Texture2D" uid="uid://bpgc4d71cn3q1" path="res://assets/ui/elements/date_bar.png" id="2"]
[ext_resource type="Texture2D" uid="uid://ta2cjwnvga0r" path="res://assets/ui/icons/months.png" id="3"]
[ext_resource type="Texture2D" uid="uid://dhhvctmgjknvt" path="res://assets/ui/elements/clock.png" id="4"]
[ext_resource type="Texture2D" uid="uid://ui883ciytmwv" path="res://assets/ui/elements/clock_hand.png" id="5"]
[ext_resource type="Texture2D" uid="uid://qjbhnm5vrgb1" path="res://assets/ui/elements/pendulum.png" id="6"]
[ext_resource type="Texture2D" uid="uid://dj6lpxioqhe22" path="res://assets/ui/elements/indicator_circle.png" id="7"]
[ext_resource type="Texture2D" uid="uid://dn11xsxbgda8l" path="res://assets/ui/icons/weather.png" id="8"]

[sub_resource type="GDScript" id="1"]
resource_name = "date_info"
script/source = "extends TextureRect

func _ready():
	Dispatcher.date_changed.connect(update_date)
	Dispatcher.month_changed.connect(update_month)
	update_date()
	update_month()

func update_date():
	$week_day.set_text(Clock.get_printable_day_abbr())
	$date.set_text(Clock.get_printable_date())

func update_month():
	$month_inset.get_node(\"sprite\").set_frame(Clock.month)
"

[sub_resource type="GDScript" id="2"]
resource_name = "clock"
script/source = "extends TextureRect

func _ready():
	Dispatcher.hour_changed.connect(move_hand)
	Dispatcher.tick_changed.connect(move_pendulum)
	move_hand()
	move_pendulum()

func move_hand():
	$hand.set_frame(Clock.hour % 12)

func move_pendulum():
#	var frame = (Clock.tick / 2) + ((Clock.hour % 2) * 2)
#	$pendulum.set_frame((frame + 1) % 4)
	$pendulum.set_frame(Clock.tick % 4)
	$minute_hand.set_frame(Clock.tick % 12)
"

[node name="garden_clock_hud" type="ReferenceRect"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -4.0
offset_top = 4.0
offset_right = -4.0
offset_bottom = 4.0
theme = ExtResource("1")

[node name="date_info" type="TextureRect" parent="."]
layout_mode = 0
offset_left = -109.0
offset_top = 1.0
offset_right = -23.0
offset_bottom = 22.0
texture = ExtResource("2")
script = SubResource("1")

[node name="week_day" type="Label" parent="date_info"]
layout_mode = 0
offset_left = 7.0
offset_top = 5.0
offset_right = 36.0
offset_bottom = 18.0
theme = ExtResource("1")
theme_override_colors/font_shadow_color = Color(0.772549, 0.592157, 0.509804, 1)
theme_override_constants/shadow_offset_x = 0
theme_override_constants/shadow_offset_y = 1
text = "MON"
horizontal_alignment = 1

[node name="date" type="Label" parent="date_info"]
layout_mode = 0
offset_left = 56.0
offset_top = 5.0
offset_right = 82.0
offset_bottom = 18.0
theme_override_colors/font_shadow_color = Color(0.772549, 0.592157, 0.509804, 1)
theme_override_constants/shadow_offset_x = 0
theme_override_constants/shadow_offset_y = 1
text = "1st"
horizontal_alignment = 1

[node name="month_inset" type="Control" parent="date_info"]
anchors_preset = 0
offset_left = 38.0
offset_top = 4.0
offset_right = 53.0
offset_bottom = 17.0

[node name="sprite" type="Sprite2D" parent="date_info/month_inset"]
texture = ExtResource("3")
centered = false
hframes = 4
vframes = 2
frame = 1

[node name="clock" type="TextureRect" parent="."]
layout_mode = 0
offset_left = -31.0
offset_top = 1.0
offset_right = -2.0
offset_bottom = 45.0
texture = ExtResource("4")
script = SubResource("2")

[node name="minute_hand" type="Sprite2D" parent="clock"]
modulate = Color(1, 0, 0, 0.501961)
position = Vector2(5, 5)
texture = ExtResource("5")
centered = false
hframes = 3
vframes = 4
frame = 2
region_rect = Rect2(0, 0, 19, 19)

[node name="hand" type="Sprite2D" parent="clock"]
modulate = Color(0.501961, 0.501961, 0.501961, 1)
position = Vector2(5, 5)
texture = ExtResource("5")
centered = false
hframes = 3
vframes = 4
region_rect = Rect2(0, 0, 19, 19)

[node name="pendulum" type="Sprite2D" parent="clock"]
visible = false
position = Vector2(9, 29)
texture = ExtResource("6")
centered = false
hframes = 2
vframes = 2
region_rect = Rect2(0, 10, 11, 10)

[node name="weather_circle" type="TextureRect" parent="."]
layout_mode = 0
offset_left = -42.0
offset_top = 17.0
offset_right = -26.0
offset_bottom = 33.0
texture = ExtResource("7")

[node name="sprite" type="Sprite2D" parent="weather_circle"]
position = Vector2(3, 3)
texture = ExtResource("8")
centered = false
hframes = 2
vframes = 2
frame = 2
